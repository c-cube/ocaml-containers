OASISFormat: 0.4
Name:        containers
Version:     0.1
Homepage:    https://github.com/c-cube/ocaml-containers
Authors:     Simon Cruanes
License:     BSD-2-clause
LicenseFile: LICENSE
Plugins:     META (0.3), DevFiles (0.3)
OCamlVersion: >= 4.00.1
BuildTools:  ocamlbuild

Synopsis:    A bunch of modules, including polymorphic containers.
Description: 
    A bunch of useful modules, including polymorphic containers, graph
    abstractions, serialization systems, testing systems and various
    experiments.

Flag "misc"
  Description:  Build the misc library, containing everything from
                the rotating kitchen sink to automatic banana distributors
  Default:      false

Flag "cgi"
  Description:  Build modules related to FastCGI, depending on CamlGI
  Default:      false

Flag "lwt"
  Description:  Build modules which depend on Lwt
  Default:      false

Flag "thread"
  Description:  Build modules that depend on threads
  Default:      false

Flag "bench"
  Description:  Build and run benchmarks
  Default:      false

Library "containers"
  Path:             core
  Modules:          CCVector, CCDeque, CCGen, CCSequence, CCFQueue, CCMultiMap,
                    CCMultiSet, CCBV, CCPrint, CCPersistentHashtbl, CCError,
                    CCHeap, CCList, CCOpt, CCPair, CCFun, CCHash,
                    CCKList, CCInt, CCBool, CCArray, CCBatch, CCOrd,
                    CCRandom, CCLinq, CCKTree
  FindlibName:      containers

Library "containers_string"
  Path:             string
  Pack:             true
  Modules:          KMP, CCString, Levenshtein
  FindlibName:      string
  FindlibParent:    containers

Library "containers_misc"
  Path:             misc
  Pack:             true
  Modules:          Cache, FHashtbl, FlatHashtbl, Hashset,
                    Heap, LazyGraph, PersistentGraph,
                    PHashtbl, SkipList, SplayTree, SplayMap, Univ,
                    Bij, PiCalculus, Bencode, Sexp, RAL,
                    UnionFind, SmallSet, AbsSet, CSM,
                    ActionMan, BencodeOnDisk, TTree, PrintBox,
                    HGraph, Automaton, Conv, Bidir, Iteratee,
                    Ty, Tell, BencodeStream, RatTerm, Cause, AVL, ParseReact
  BuildDepends:     unix,containers
  FindlibName:      misc
  FindlibParent:    containers

Library "containers_thread"
  Path:             threads/
  Modules:          Future
  FindlibName:      thread
  FindlibParent:    containers
  Build$:           flag(thread)
  Install$:         flag(thread)
  BuildDepends:     containers,threads
  XMETARequires:    containers,threads,lwt

Library "containers_lwt"
  Path:             lwt
  Modules:          Behavior, Lwt_automaton
  Pack:             true
  FindlibName:      lwt
  FindlibParent:    containers
  Build$:           flag(lwt) && flag(misc)
  Install$:         flag(lwt) && flag(misc)
  BuildDepends:     containers,lwt,lwt.unix,containers.misc
  XMETARequires:    containers,lwt,lwt.unix,containers.misc

Library "containers_cgi"
  Path:             cgi
  Modules:          ToWeb
  FindlibName:      cgi
  FindlibParent:    containers
  Build$:           flag(cgi)
  Install$:         flag(cgi)
  BuildDepends:     containers,CamlGI
  XMETARequires:    containers,CamlGI

Document containers
  Title:                Containers docs
  Type:                 ocamlbuild (0.3)
  BuildTools+:          ocamldoc
  Install:              true
  XOCamlbuildPath:      .
  XOCamlbuildLibraries: containers,containers.string

Document containers_misc
  Title:                Containers_misc docs
  Type:                 ocamlbuild (0.3)
  BuildTools+:          ocamldoc
  Install:              true
  XOCamlbuildPath:      .
  XOCamlbuildLibraries: containers.misc

Document containers_string
  Title:                Containers_string docs
  Type:                 ocamlbuild (0.3)
  BuildTools+:          ocamldoc
  Install:              true
  XOCamlbuildPath:      .
  XOCamlbuildLibraries: containers.string

Executable benchs
  Path:             tests/
  Install:          false
  CompiledObject:   native
  Build$:           flag(bench)
  MainIs:           benchs.ml
  BuildDepends:     containers,containers.string,containers.misc,bench

Executable bench_conv
  Path: tests/
  Install: false
  CompiledObject: native
  Build$: flag(bench)
  MainIs: bench_conv.ml
  BuildDepends: containers,benchmark

Executable bench_batch
  Path: tests/
  Install: false
  CompiledObject: native
  Build$: flag(bench)
  MainIs: bench_batch.ml
  BuildDepends: containers,benchmark

Executable bench_hash
  Path: tests/
  Install: false
  CompiledObject: native
  Build$: flag(bench) && flag(misc)
  MainIs: bench_hash.ml
  BuildDepends: containers,containers.misc

Executable test_levenshtein
  Path: tests/
  Install: false
  CompiledObject: native
  Build$: flag(tests)
  MainIs: test_levenshtein.ml
  BuildDepends: containers,qcheck

Executable test_lwt
  Path: tests/lwt/
  Install: false
  CompiledObject: best
  Build$: flag(tests) && flag(lwt)
  MainIs: test_Behavior.ml
  BuildDepends: containers,lwt,lwt.unix,oUnit,containers.lwt

Executable test_threads
  Path: tests/lwt/
  Install: false
  CompiledObject: best
  Build$: flag(tests) && flag(thread)
  MainIs: test_Future.ml
  BuildDepends: containers,threads,oUnit,containers.lwt

Test all
  Command: make test-all
  TestTools: run_tests
  Run$: flag(tests)

Executable run_tests
  Path: tests/
  Install: false
  CompiledObject: native
  MainIs: run_tests.ml
  Build$: flag(tests)
  BuildDepends: containers, oUnit, qcheck

Executable web_pwd
  Path: examples/cgi/
  Install: false
  MainIs: web_pwd.ml
  Build$: flag(cgi)
  BuildDepends: containers, containers.cgi, threads, CamlGI

Executable lambda
  Path: examples/
  Install: false
  MainIs: lambda.ml
  Build$: flag(misc)
  BuildDepends: containers,containers.misc

SourceRepository head
  Type: git
  Location: https://github.com/c-cube/ocaml-containers
  Browser: https://github.com/c-cube/ocaml-containers/tree/master/src
